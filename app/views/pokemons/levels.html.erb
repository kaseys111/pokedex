<div class="page-header">
  <h1>
    Level Up Strategy
  </h1>
</div>

<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <tr>
        <th>Pokemon</th>
        <th>Current Level</th>
        <th>Levels Left</th>
        <th>Outcome</th>
      </tr>

      <% @pokemons.sort_by { |p| [p.new_move_level, p.evolve_level].compact.min - p.level } .each do |pokemon| %>
      <tr>
        <td><a href="/pokemons/<%= pokemon.id %>"><%= pokemon.creature.capitalize %></a></td>
        <td><%= pokemon.level %></td>
        <td>
          <%= [pokemon.new_move_level, pokemon.evolve_level].compact.min - pokemon.level %>
        </td>
        <% if pokemon.evolve_level.nil? == false %>
          <% if pokemon.new_move_level <= pokemon.evolve_level %>
            <td><%= pokemon.new_move.titleize %></td>
          <% else %>
            <td><%= pokemon.other.titleize %></td>
          <% end %>
        <% else %>
          <td><%= pokemon.new_move.titleize %></td>
        <% end %>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
